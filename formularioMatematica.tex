\documentclass[8pt, a4paper, twocolumn]{extarticle}

\usepackage{extsizes} % Smaller text
\usepackage[italian]{babel} % Italian support
\usepackage{amsmath,amsfonts,amssymb,mathtools,mathrsfs,amsthm}
\usepackage{bm} % Bold math
\usepackage[utf8]{inputenc} % Accented letters
\usepackage{fullpage}
\usepackage[medium]{titlesec} % Smaller section's font
\usepackage[pdftex,dvipsnames]{xcolor} % Colors for text
\usepackage{xtab, booktabs, array} % For better tables
\usepackage{parskip} % To avoid indentation
\usepackage{textcomp} % To have \textcelsius and other symbols
\usepackage{multirow} % For nicer tables with split rows/columns
\usepackage{multicol}
\usepackage{cancel} % Cacelled equations and simplifications
\usepackage{xargs} % Allows for multiple arguments commmands
\usepackage{enumitem} % For more flexibility on lists\usepackage{extsizes} % Smaller text
\usepackage{siunitx} % Adds the international system of measures and the \ang{degrees} command
\usepackage{mathabx} % For better \land, \lor and \lnot
\usepackage[labelformat=empty]{caption}
\usepackage{etoolbox}

\usepackage[showframe=false, top=1cm, bottom=1.5cm, left=1.5cm, right=1.5cm]{geometry}

\usepackage{hyperref} % Hyperlinks
\hypersetup{
	colorlinks,
	citecolor=black,
	filecolor=black,
	linkcolor=blue,
	urlcolor=black
}
\usepackage[all]{hypcap} % To fix caption loading of hyperref

\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.11}
\usepgfplotslibrary{fillbetween}
\usetikzlibrary{
  arrows,
  decorations,
  calc,
  intersections,
  matrix,
  decorations.pathmorphing,
  spy,
}
\usepackage{tkz-euclide}
\usepackage{tikz-qtree}

% axis style, ticks, etc
\pgfplotsset{every axis/.append style={
              axis x line=middle,    % put the x axis in the middle
              axis y line=middle,    % put the y axis in the middle
              axis line style={<->}, % arrows on the axis
              xlabel={$x$},          % default put x on x-axis
              ylabel={$y$},          % default put y on y-axis
              axis equal,            % 1:1 ratio
              grid=both,             % coordinate grid
              grid style={line width=.1pt, draw=gray!10},
              major grid style={line width=.2pt,draw=gray!50},
              ticks=both,            % ticks for integers
              minor tick num=5,      % number of subticks
              ticklabel style={font=\small,fill=white},
              xlabel style={at={(ticklabel* cs:1)},anchor=north west},
              ylabel style={at={(ticklabel* cs:1)},anchor=south west},
            }
}
\tikzset{>=stealth}

\setcounter{secnumdepth}{0} % sections are level 1
\setcounter{tocdepth}{3}

\DeclarePairedDelimiter\norm{\lVert}{\rVert} % ||v||
\DeclarePairedDelimiter\abs{\lvert}{\rvert} % |v|

\def\mathcolor#1#{\@mathcolor{#1}}
\def\@mathcolor#1#2#3{%
	\protect\leavevmode
	\begingroup
	\color#1{#2}#3%
	\endgroup
}
\newcommand{\Setsuchthat}{\;\ifnum\currentgrouptype=16 \middle\fi|\;}
\newcommand{\suchthat}{\,:}

\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}
% Some useful TODO commands
\newcommandx{\unsure}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}
\newcommandx{\change}[2][1=]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue,#1]{#2}}
\newcommandx{\info}[2][1=]{\todo[linecolor=OliveGreen,backgroundcolor=OliveGreen!25,
	bordercolor=OliveGreen,#1]{#2}}
\newcommandx{\improvement}[2][1=]{\todo[linecolor=Plum,backgroundcolor=Plum!25,
	bordercolor=Plum,#1]{#2}}
\newcommandx{\thiswillnotshow}[2][1=]{\todo[disable,#1]{#2}}

\setlength{\marginparwidth}{2cm} % For better TODO's display

% For better visual in tables
\renewcommand*{\arraystretch}{2.5}
% To center with m{}
\usepackage{array}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}
\newcommand{\divisor}{\rule{8.7cm}{0.4pt}}

\newcommand*\dif{\mathop{}\!\mathrm{d}}
\newcommand*\Dif{\mathop{}\!\mathrm{D}}
\newcommand*{\der}[2]{\frac{\dif #1}{\dif #2}}

\DeclareMathOperator{\arcsec}{arcsec}
\DeclareMathOperator{\arccot}{arccot}
\DeclareMathOperator{\arccsc}{arccsc}

% For an older but clearer root. Still \oldsqrt is valid
\usepackage{letltxmacro}
\makeatletter
\let\oldr@@t\r@@t
\def\r@@t#1#2{%
	\setbox0=\hbox{$\oldr@@t#1{#2\,}$}\dimen0=\ht0
	\advance\dimen0-0.2\ht0
	\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
	{\box0\lower0.4pt\box2}}
\LetLtxMacro{\oldsqrt}{\sqrt}
\renewcommand*{\sqrt}[2][\ ]{\oldsqrt[#1]{#2} }
\makeatother

\newcommand\markangle[7][red]{% [color] origin A B radius radiusmark mark
	% fill red circle
	\begin{scope}
		\path[clip] (#2) -- (#3) -- (#4);
		\fill[color=#1,fill opacity=0.5,draw=#1,name path=circle]
		(#2) circle (#5);
	\end{scope}
	% middle calculation
	\path[name path=line one] (#2) -- (#3);
	\path[name path=line two] (#2) -- (#4);
	\path[%
	name intersections={of=line one and circle, by={inter one}},
	name intersections={of=line two and circle, by={inter two}}
	] (inter one) -- (inter two) coordinate[pos=.5] (middle);
	% put mark
	\node at ($(#2)!#6!(middle)$) {#7};
}

\newcommand\domainplot[3]{ % start end list \domainplot{0}{2}{0,1}
  \draw[shorten <= -1cm,shorten >= -1cm] (#1) -- (#2);
  \foreach \x in #3{
    \coordinate (A) at (#1);
    \coordinate (B) at (\x,0);
    \filldraw[fill=white,draw=black] (A-|B) circle(2pt)
      node[below]{\x};
  }
}

\newcommand{\mysign}[1]{
  \pgfmathtruncatemacro\tmpsign{sign(#1)}
    \ifnum\tmpsign<0
      -
    \else
      \ifnum\tmpsign>0
      +
      \else
      \relax
    \fi
  \fi
}

\newcommand{\mytick}[1]{
  \pgfmathtruncatemacro\tmpsign{sign(#1)}
  \ifnum\tmpsign<0
    \relax
  \else
    \ifnum\tmpsign>0
      \relax
    \else
      $|$
    \fi
  \fi
}

\newcommand{\drawSign}[6][]{% f(x) xmin xmax delta exclpoints
  \begin{scope}[#1,declare function={Test(\x) = #2;}]
    \draw [->, thick] (#3,0) -- (#4,0)node[right] {$x$};
    \pgfmathsetmacro{\NextI}{#3+#5}
    \foreach \i in {#3,\NextI,...,#4}{
      \node at (\i,{0.35*sign(max(min(Test(\i),1),-1))}) {$\mysign{Test(\i)}$};
      \pgfmathtruncatemacro\signum{sign(Test(\i))}
      \ifnum\signum=0
        \filldraw[black] (\i,0) circle(2pt);
        %\node[circle,fill,maximum size=2pt] at (\i,0){};
        \node[below] at (\i,-0.2){$\i$};
      \fi
    }
  \ifx&#6&%
  \else  
    % Excluded points
    \foreach \x in #6{
      \filldraw[fill=white,draw=black] (\x,0) circle(2pt);
      \node[below] at (\x,-0.2) {$\x$};
    }
  \fi
  \end{scope}
}

% Arc over text
\usepackage{graphicx}
\makeatletter
\DeclareFontFamily{U}{tipa}{}
\DeclareFontShape{U}{tipa}{m}{n}{<->tipa10}{}
\newcommand{\arc@char}{{\usefont{U}{tipa}{m}{n}\symbol{62}}}%

\newcommand{\arc}[1]{\mathpalette\arc@arc{#1}}

\newcommand{\arc@arc}[2]{%
	\sbox0{$\m@th#1#2$}%
	\vbox{
		\hbox{\resizebox{\wd0}{\height}{\arc@char}}
		\nointerlineskip
		\box0
	}%
}
\makeatother

% Matrix spacing
\makeatletter
\renewcommand*\env@matrix[1][\arraystretch]{%
	\edef\arraystretch{#1}%
	\hskip -\arraycolsep
	\let\@ifnextchar\new@ifnextchar
	\array{*\c@MaxMatrixCols c}}
\makeatother

\everymath{\displaystyle}
\newcommand\ddfrac[2]{\frac{\displaystyle #1}{\displaystyle #2}}

% Proof changes
\renewcommand\qedsymbol{QED}
%\renewenvironment{proof}[1][\proofname]{{\bfseries #1.}}{}

\expandafter\let\expandafter\oldproof\csname\string\proof\endcsname
\let\oldendproof\endproof
\renewenvironment{proof}[1][\proofname]{%
  \oldproof[\ttfamily \scshape \large #1]\mbox{}\\*%
}{\oldendproof}

% Footers for date, vesion and copyright
\usepackage[yyyymmdd]{datetime}
\renewcommand{\dateseparator}{-}

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{} % clear all header fields
\renewcommand{\headrulewidth}{0pt} % no line in header area
\fancyfoot{} % clear all footer fields
\fancyfoot[CE,CO]{\thepage}% page number in "outer" position of footer line
\fancyfoot[RE,RO]{Copyright \copyright 2017--\the\year$\,$Cossu Davide
} % other info in "inner" position of footer line
\fancyfoot[LE,LO]{Version 1.1.3 \today
}

\begin{document}
	
\newcommand{\LabelText}{}
\NewDocumentCommand{\LabelPoint}{o o m m g}{
  \def\plotcmd{\addplot [#1] coordinates{(#3,#4)} node [#2]}
    \IfNoValueTF{#5}{
        \renewcommand{\LabelText}{ {$(#3,#4)$}} % Label with given coordinates
    }{
        \renewcommand{\LabelText}{ {#5}} % Use given label
    }

  \expandafter\plotcmd\LabelText;

    %\pgfsyssoftpath@flushcurrentpath % -- Syntax error
    %\pgfusepath{fill}                % -- no effect
}

\NewDocumentCommand{\LabelPointX}{o o m m g}{
  \IfNoValueTF{#5}{
    \addplot [#1] coordinates{(#3,#4)} node [#2] {$(#3,#4)$};
  }{
    \addplot [#1] coordinates{(#3,#4)} node [#2] {#5};
  }
}
\onecolumn
\begin{@twocolumnfalse}
	\clearpage
	\vspace*{\stretch{1.5}}
	\begin{center}
		\begin{figure*}[!h]
			\centering
                        \captionsetup{justification=centering}
			\includegraphics[scale=1.7]{colophon/octopus}
			\caption{
                          \textit{`Mi piace ["..."] la libertà della matematica. Se studi fisica 
                            o chimica devi descrivere il mondo reale. Ma in matematica puoi 
                            costruire le tue strutture. Puoi camminare in mondi creati 
                            dall'immaginazione delle persone. Non sei legato al 
			    mondo reale. È come essere Dio in un certo senso. Puoi creare mondi, 
                            e studiarli. Credo sia per una combinazione della bellezza, 
                            dell'immaginazione e della libertà. 
			'}\\- Aner Shalev\\ [\baselineskip]
                          \textit{`La matematica, ahinoi, si presta ai colpi bassi. C'Ã¨ un 
                           «terrorismo matematico», che consiste nello spaventare l'avversario 
                          sparandogli contro raffiche di equazioni, derivate, integrali, logaritmi,
                          matrici, teoremi e corollari.'}\\- Sergio Ricossa\\ [\baselineskip]
                          \textit{`Più scrivi, più sbagli.'}\\- Paolo Mainardis}
			\label{fig:octopus}
		\end{figure*}
		\vspace{1cm}
		\begin{minipage}{.6\textwidth}				
			\begin{center}
				{\Huge\textbf{Formulario di Matematica}}\\\vspace{0.2cm}
				{\textbf{Davide Cossu}}
			\end{center}
			\vspace{0.5cm}
			Questo è un formulario con le formule di matematica fatte durante tutti e cinque gli anni 
			di un liceo scientifico con alcune spiegazioni teoriche ed esercizi.
		\end{minipage}
	\end{center}
	\vspace{\stretch{3}} % \vfill equivalent to \vspace{\fill}
	\clearpage
\end{@twocolumnfalse}

\twocolumn
{
	\hypersetup{linkcolor=black}
	\tableofcontents
}

\newpage
\textbf{Durante tutto il formulario, si userà il sistema internazionale di notazione, ovvero $.$ per 
separare interi da decimali e $,$ per separare le migliaia se necessario.}
\section{Simboli}
Qui verrano chiariti i simboli che verranno utilizzati nel formulario. Molti di essi si troveranno
principalmente nelle definizioni formali ma ritorneranno utili anche negli esercizi.

\begin{tabular}{c | M{6cm}}
	$\sum\limits_{i = l}^{n} f(i)$ & $f(l) + f(l+1) + \dotsb + f(n)$\\
	$\prod\limits_{i = l}^{n} f(i)$ & $f(l) \cdot f(l+1) \dotsm f(n)$\\
	$\forall$ & Per ogni\\
	$\exists$ & Esiste\\
	$\in$ & Appartiene\\
	$\not\in$ & Non appartiene\\
	$\cup$ & Unito\\
	$\cap$ & Intersecato\\
	$\mid$, $:$ & Tale che\\
	$\Rightarrow$ & Si ha che\\
	$\mapsto$ & Diventa\\
	$\rightarrow$ & Ne segue che, tende\\
	$\iff$ & Se e solo se
\end{tabular}

\input{teoremi}

\input{generale}
\input{geomAnal}
\input{goniom}
\input{log}
\input{prog}
\input{prob}
\input{aff}
\input{complessi}
\input{insiemi}
\input{limiti}
\input{funzCont}
\input{suc}
\input{derivate}
\input{integrali}
\input{studio}

\include{ex}

\include{dimostrazioni}

% List of TODOs
\newpage
\listoftodos[Note]

\end{document}
